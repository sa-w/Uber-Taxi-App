"use strict";(self.webpackChunksuperAdmin=self.webpackChunksuperAdmin||[]).push([[172],{2172:(O,v,l)=>{l.r(v),l.d(v,{MapsModule:()=>T});var a=l(9808),b=l(1402),_=function n(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){if(t.constructor!==o.constructor)return!1;var i,r,p;if(Array.isArray(t)){if((i=t.length)!=o.length)return!1;for(r=i;0!=r--;)if(!n(t[r],o[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((i=(p=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(o,p[r]))return!1;for(r=i;0!=r--;){var M=p[r];if(!n(t[M],o[M]))return!1}return!0}return t!=t&&o!=o};const C="__googleMapsScriptId";var f=(()=>{return(n=f||(f={}))[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE",f;var n})();class g{constructor({apiKey:t,authReferrerPolicy:o,channel:i,client:r,id:p=C,language:M,libraries:A=[],mapIds:P,nonce:E,region:k,retries:D=3,url:I="https://maps.googleapis.com/maps/api/js",version:x}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=o,this.channel=i,this.client=r,this.id=p||C,this.language=M,this.libraries=A,this.mapIds=P,this.nonce=E,this.region=k,this.retries=D,this.url=I,this.version=x,g.instance){if(!_(this.options,g.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(g.instance.options)}`);return g.instance}g.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?f.FAILURE:this.done?f.SUCCESS:this.loading?f.LOADING:f.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,o)=>{this.loadCallback(i=>{i?o(i.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),o=document.createElement("script");o.id=this.id,o.type="text/javascript",o.src=t,o.onerror=this.loadErrorCallback.bind(this),o.defer=!0,o.async=!0,this.nonce&&(o.nonce=this.nonce),document.head.appendChild(o)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var e=l(5e3),s=l(7556),h=l(5019),w=l(4594),y=l(6688);const m=[{path:"",component:(()=>{class n{constructor(o,i,r){this.authService=o,this.router=i,this.db=r,this.title="google-maps",this.driversList=[],this.activeDrivers=[],this.markers=[],this.getAllOrders()}ngOnInit(){new g({apiKey:"AIzaSyCStQqJ7WhpiDIPsIJ29UDaHI-5aeza89I"}).load().then(()=>{console.log("loaded gmaps"),this.authService.getAllTaxis().subscribe(i=>{this.driversList=[],this.driversList=i.map(r=>{const p=r.payload.doc.data();return p.id=r.payload.doc.id,p}),console.log(this.driversList),this.driversList.forEach(r=>{console.log("Info"),console.log(r.position.geopoint._lat),console.log(r.position.geopoint._long);const p={lat:r.position.geopoint._lat,lng:r.position.geopoint._long};this.markers.push(p),console.log(this.markers),this.map=new google.maps.Map(document.getElementById("map"),{center:p,zoom:6}),this.markers.forEach(M=>{new google.maps.Marker({position:new google.maps.LatLng(M.lat,M.lng),icon:{url:"assets/car.png",size:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16),scaledSize:new google.maps.Size(50,50)},animation:google.maps.Animation.DROP,map:this.map})})})})})}logout(){this.authService.logout().then(()=>this.router.navigate(["/"])).catch(o=>console.log(o.message))}getAllOrders(){this.authService.getAllTaxis().subscribe(o=>{this.driversList=o.map(i=>{const r=i.payload.doc.data();return r.id=i.payload.doc.id,r}),console.log(this.driversList),this.driversList.forEach(i=>{console.log("Info"),console.log(i.position.geopoint._lat),console.log(i.position.geopoint._long)})},o=>{alert("error")}),console.log(this.driversList)}goToDrivers(){this.router.navigate(["/drivers"])}goToPassengers(){this.router.navigate(["/passengers"])}goToHome(){this.router.navigate(["/dashboard"])}goToOrders(){this.router.navigate(["/orders"])}goToMaps(){this.router.navigate(["/maps"])}goToSettings(){this.router.navigate(["/settings"])}ngAfterViewInit(){}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(s.e),e.Y36(b.F0),e.Y36(h.KQ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-maps"]],decls:33,vars:0,consts:[["aria-label","Color selection",1,"mat-chip-list-stacked"],[2,"background-color","rgb(214, 100, 43)"],[2,"color","white","justify-content","left","font-size","25px"],[1,"example-spacer"],[3,"click"],[2,"color","white",3,"click"],["id","map",1,"full"]],template:function(o,i){1&o&&(e.TgZ(0,"mat-toolbar")(1,"mat-chip-list",0)(2,"mat-chip",1)(3,"span",2),e._uU(4,"Super-Admin "),e.qZA()()(),e._UZ(5,"span",3),e.TgZ(6,"a",4),e.NdJ("click",function(){return i.goToHome()}),e._uU(7,"Home"),e.qZA(),e.TgZ(8,"a",4),e.NdJ("click",function(){return i.goToDrivers()}),e._uU(9,"Drivers"),e.qZA(),e.TgZ(10,"a",4),e.NdJ("click",function(){return i.goToPassengers()}),e._uU(11,"Passengers"),e.qZA(),e.TgZ(12,"a",4),e.NdJ("click",function(){return i.goToOrders()}),e._uU(13,"Orders"),e.qZA(),e.TgZ(14,"a",4),e.NdJ("click",function(){return i.goToMaps()}),e._uU(15,"Track Drivers"),e.qZA(),e.TgZ(16,"a",4),e.NdJ("click",function(){return i.goToSettings()}),e._uU(17,"Settings"),e.qZA(),e._UZ(18,"span",3)(19,"span",3)(20,"span",3)(21,"span",3)(22,"span",3)(23,"span",3)(24,"span",3)(25,"span",3)(26,"span",3)(27,"span",3),e.TgZ(28,"mat-chip-list",0)(29,"mat-chip",1)(30,"a",5),e.NdJ("click",function(){return i.logout()}),e._uU(31,"Log out"),e.qZA()()()(),e._UZ(32,"div",6))},directives:[w.Ye,y.qn,y.HS],styles:[".full[_ngcontent-%COMP%]{width:100vw;height:100vh}h1[_ngcontent-%COMP%]{color:#cb572d;font-size:30px;font-weight:bolder}h2[_ngcontent-%COMP%]{color:#698893;margin-bottom:50px}a[_ngcontent-%COMP%]{color:#fff;border-bottom:2px solid transparent;transition:1s border-bottom;padding:10px;justify-content:center;text-align:center}a[_ngcontent-%COMP%]:hover{color:#cb572d;border-bottom:2px solid transparent;font-size:20px;background-color:#fff;border-radius:10%;padding:4px}mat-toolbar[_ngcontent-%COMP%]{background-color:#dd9176;opacity:1;display:flex;justify-items:flex-start}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-row[_ngcontent-%COMP%]:nth-child(even){background-color:#dd9176;opacity:.9}.mat-row[_ngcontent-%COMP%]:nth-child(even):hover{background-color:#dd9176;opacity:1}.mat-row[_ngcontent-%COMP%]:nth-child(odd){background-color:#dd9176;opacity:.8}.mat-row[_ngcontent-%COMP%]:nth-child(odd):hover{background-color:#dd9176;opacity:1}.mat-header-cell[_ngcontent-%COMP%]{background-color:#d57856;font-size:medium;font-weight:700;opacity:1}.matColumnDef[_ngcontent-%COMP%]:hover{opacity:.8}.button[_ngcontent-%COMP%]{background-color:#fff;color:#ac3621;border-radius:10px}.button[_ngcontent-%COMP%]:hover{background-color:#ac3621;color:#fff;opacity:.7}.deleteButton[_ngcontent-%COMP%]{background-color:#c13247;color:#fff;border-radius:10px;margin-left:10px}.deleteButton[_ngcontent-%COMP%]:hover{background-color:#fff;color:#c13247;opacity:.9}.background[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;height:calc(100vh - 64px);padding:20px;background-color:#dabfb5;opacity:.9}.btn[_ngcontent-%COMP%]{background-color:#cb572d;border-radius:20px;color:#fff;padding:10px 30px;text-decoration:none;transition:.5s background-color}a[_ngcontent-%COMP%]:hover{border-bottom:2px solid #cb572d;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#52b7c0}table[_ngcontent-%COMP%]{width:100%}"]}),n})()}];let d=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[b.Bz.forChild(m)],b.Bz]}),n})();var u=l(8099);let T=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,d,y.Hi,w.g0,u.Ps]]}),n})()},7556:(O,v,l)=>{l.d(v,{e:()=>f});var a=l(7323),b=l(8937),_=l(5e3),C=l(6185);let f=(()=>{class g{constructor(s,h){this.auth=s,this.afs=h,this.commisions=h.collection("commision"),this.settings=h.collection("settings")}login({email:s,password:h}){return(0,a.e5)(this.auth,s,h)}loginWithGoogle(){return(0,a.rh)(this.auth,new b.hJ)}register({email:s,password:h}){return(0,a.Xb)(this.auth,s,h)}logout(){return(0,a.w7)(this.auth)}getAllDrivers(){return this.afs.collection("/drivers").snapshotChanges()}getAllPassengers(){return this.afs.collection("/users").snapshotChanges()}getAllOrders(){return this.afs.collection("/orders").snapshotChanges()}getAllTaxis(){return this.afs.collection("/locations").snapshotChanges()}getUserDoc(s){return this.afs.collection("drivers").doc(s).valueChanges()}getAllOrdersByDriver(s){return this.afs.collection("orders",h=>h.where("driverId","==",s)).snapshotChanges()}getPassengerDoc(s){return this.afs.collection("users").doc(s).valueChanges()}getAllOrdersByPassenger(s){return this.afs.collection("orders",h=>h.where("userId","==",s)).snapshotChanges()}getOrderDoc(s){return this.afs.collection("orders").doc(s).valueChanges()}getAllOrdersByID(s){return this.afs.collection("orders",h=>h.where("timestamp","==",s)).snapshotChanges()}getAllSettings(){return this.afs.collection("/settings").snapshotChanges()}getSettingDoc(s){return this.afs.collection("settings").doc(s).valueChanges()}getCommisionDoc(s){return this.afs.collection("commision").doc("commisionPercent").valueChanges()}updateCommision(s){return this.commisions.doc("commisionPercent/").update(s)}updateSettings(s,h){return this.settings.doc(s).update(h)}}return g.\u0275fac=function(s){return new(s||g)(_.LFG(a.gx),_.LFG(C.ST))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},4594:(O,v,l)=>{l.d(v,{Ye:()=>h,g0:()=>y});var a=l(5e3),b=l(508),_=l(9808),C=l(925);const f=["*",[["mat-toolbar-row"]]],g=["*","mat-toolbar-row"],e=(0,b.pj)(class{constructor(c){this._elementRef=c}});let s=(()=>{class c{}return c.\u0275fac=function(d){return new(d||c)},c.\u0275dir=a.lG2({type:c,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),c})(),h=(()=>{class c extends e{constructor(d,u,T){super(d),this._platform=u,this._document=T}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return c.\u0275fac=function(d){return new(d||c)(a.Y36(a.SBq),a.Y36(C.t4),a.Y36(_.K0))},c.\u0275cmp=a.Xpm({type:c,selectors:[["mat-toolbar"]],contentQueries:function(d,u,T){if(1&d&&a.Suo(T,s,5),2&d){let n;a.iGM(n=a.CRH())&&(u._toolbarRows=n)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(d,u){2&d&&a.ekj("mat-toolbar-multiple-rows",u._toolbarRows.length>0)("mat-toolbar-single-row",0===u._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[a.qOj],ngContentSelectors:g,decls:2,vars:0,template:function(d,u){1&d&&(a.F$t(f),a.Hsn(0),a.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),c})(),y=(()=>{class c{}return c.\u0275fac=function(d){return new(d||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({imports:[[b.BQ],b.BQ]}),c})()}}]);